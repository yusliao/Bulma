2025-05-23 21:29:15.651 +08:00 [ERR] 数据库初始化失败
System.Exception: User 创建失败,请认真检查 1、属性需要get set 2、特殊类型需要加Ignore 具体错误内容： 中文提示 :  连接数据库过程中发生错误，检查服务器是否正常连接字符串是否正确，错误信息：Unknown database 'batterypackingmes_dev'DbType="MySql";ConfigId="".
English Message : Connection open error . Unknown database 'batterypackingmes_dev'DbType="MySql";ConfigId="" 
   at SqlSugar.CodeFirstProvider.InitTables(Type[] entityTypes)
   at BatteryPackingMES.Infrastructure.Data.MESDbContext.InitializeDatabaseAsync() in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Data\MESDbContext.cs:line 90
   at Program.<Main>$(String[] args) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Api\Program.cs:line 103
2025-05-23 21:29:15.722 +08:00 [INF] 锂电池包装工序MES系统启动成功
2025-05-23 21:29:15.723 +08:00 [INF] API文档地址: https://localhost:5001
2025-05-23 21:29:15.732 +08:00 [INF] User profile is available. Using 'C:\Users\ASUS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-23 21:29:15.761 +08:00 [INF] Now listening on: http://localhost:5000
2025-05-23 21:29:15.764 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-23 21:29:15.765 +08:00 [INF] Hosting environment: Development
2025-05-23 21:29:15.766 +08:00 [INF] Content root path: D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Api
2025-05-23 21:30:28.020 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/v2/reports/production-daily - null null
2025-05-23 21:30:28.043 +08:00 [WRN] Failed to determine the https port for redirect.
2025-05-23 21:30:28.057 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-23 21:30:28.060 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-23 21:30:28.066 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/v2/reports/production-daily - 401 0 null 46.6797ms
2025-05-23 21:30:28.077 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/v2/reports/quality-statistics - null null
2025-05-23 21:30:28.084 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-23 21:30:28.085 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-23 21:30:28.087 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/v2/reports/quality-statistics - 401 0 null 9.8375ms
2025-05-23 21:30:28.091 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/v2/reports/equipment-efficiency - null null
2025-05-23 21:30:28.095 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-23 21:30:28.097 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-23 21:30:28.098 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/v2/reports/equipment-efficiency - 401 0 null 6.7535ms
2025-05-23 21:30:28.119 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/v2/messagequeue/production-line-status - application/json 174
2025-05-23 21:30:28.122 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-23 21:30:28.124 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-23 21:30:28.125 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/v2/messagequeue/production-line-status - 401 0 null 6.0439ms
2025-05-23 21:30:28.128 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/v2/messagequeue/quality-check - application/json 226
2025-05-23 21:30:28.132 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-23 21:30:28.133 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-23 21:30:28.135 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/v2/messagequeue/quality-check - 401 0 null 6.6323ms
2025-05-23 21:30:28.139 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/v2/messagequeue/history?messageType=ProductionLineStatus&limit=5 - null null
2025-05-23 21:30:28.160 +08:00 [ERR] 记录指标失败: api.request.duration
SqlSugar.SqlSugarException: SnowflakeId IsIdentity can't true
   at SqlSugar.Check.Exception(Boolean isException, String message, String[] args)
   at SqlSugar.InsertableProvider`1.ExecuteReturnSnowflakeIdAsync()
   at BatteryPackingMES.Infrastructure.Repositories.BaseRepository`1.AddAsync(T entity) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Repositories\BaseRepository.cs:line 77
   at BatteryPackingMES.Infrastructure.Services.MetricsService.RecordMetricAsync(String metricName, Double value, String metricType, Dictionary`2 tags) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Services\MetricsService.cs:line 51
2025-05-23 21:30:28.164 +08:00 [ERR] 记录指标失败: api.request.count
SqlSugar.SqlSugarException: SnowflakeId IsIdentity can't true
   at SqlSugar.Check.Exception(Boolean isException, String message, String[] args)
   at SqlSugar.InsertableProvider`1.ExecuteReturnSnowflakeIdAsync()
   at BatteryPackingMES.Infrastructure.Repositories.BaseRepository`1.AddAsync(T entity) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Repositories\BaseRepository.cs:line 77
   at BatteryPackingMES.Infrastructure.Services.MetricsService.RecordMetricAsync(String metricName, Double value, String metricType, Dictionary`2 tags) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Services\MetricsService.cs:line 51
2025-05-23 21:30:28.167 +08:00 [ERR] 记录指标失败: api.request.errors
SqlSugar.SqlSugarException: SnowflakeId IsIdentity can't true
   at SqlSugar.Check.Exception(Boolean isException, String message, String[] args)
   at SqlSugar.InsertableProvider`1.ExecuteReturnSnowflakeIdAsync()
   at BatteryPackingMES.Infrastructure.Repositories.BaseRepository`1.AddAsync(T entity) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Repositories\BaseRepository.cs:line 77
   at BatteryPackingMES.Infrastructure.Services.MetricsService.RecordMetricAsync(String metricName, Double value, String metricType, Dictionary`2 tags) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Services\MetricsService.cs:line 51
2025-05-23 21:30:28.170 +08:00 [ERR] 记录指标失败: api.request.latency_category
SqlSugar.SqlSugarException: SnowflakeId IsIdentity can't true
   at SqlSugar.Check.Exception(Boolean isException, String message, String[] args)
   at SqlSugar.InsertableProvider`1.ExecuteReturnSnowflakeIdAsync()
   at BatteryPackingMES.Infrastructure.Repositories.BaseRepository`1.AddAsync(T entity) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Repositories\BaseRepository.cs:line 77
   at BatteryPackingMES.Infrastructure.Services.MetricsService.RecordMetricAsync(String metricName, Double value, String metricType, Dictionary`2 tags) in D:\MyDomain\src\AI\Bulma\src\BatteryPackingMES.Infrastructure\Services\MetricsService.cs:line 51
2025-05-23 21:30:28.173 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/v2/messagequeue/history?messageType=ProductionLineStatus&limit=5 - 404 0 null 34.4995ms
2025-05-23 21:30:28.177 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/api/v2/messagequeue/history, Response status code: 404
